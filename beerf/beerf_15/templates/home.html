{% load staticfiles %}
<html ng-app="store">
<title>The Beer Factory</title>

<head> 
	<script type="text/javascript" src="{% static "angular/angular.min.js" %}"> </script>
	<meta charset="utf-8"/>
	<link rel="stylesheet" type="text/css" href="{% static "bootstrap-3.3.6-dist/css/bootstrap.min.css" %}" />
	<link rel="stylesheet" type="text/css" href="{% static "css/left.css" %}" />
	<link rel="stylesheet" href="https://npmcdn.com/angular-toastr/dist/angular-toastr.css" />
	<script src="http://foxandxss.github.io/angular-toastr/vendor/angular-animate.js"></script>
	<script src="https://npmcdn.com/angular-toastr/dist/angular-toastr.tpls.js"></script>
	
	<script src="{% static "js/jquery.min.js" %}"></script>
	<script src="{% static "js/jquery.imagemapster.js" %}"></script>
    <script src="{% static "bootstrap-3.3.6-dist/js/bootstrap.min.js" %}"></script>
</head>

<body>

<div>
	<nav class="navbar navbar-default navbar-fixed-top nav-container">
	  	<div class="container-fluid"   ng-repeat="product in store.products">
	   		<div class="navbar-header col-md-3">
	   		  <a class="navbar-brand" href="#">BEER-FACTORY</a>
	   		</div>
	    		
	   		<ul class="top-info col-md-9">
	   		  <li class="col-md-2"></li>
	   		  <li class="col-md-2"></li>
			  <li class="col-md-2"></li>
			  <li class="col-md-2"></li>
			  <li class="col-md-2"> Hi {{ name }}</li>	
	   		</ul>
		</div>
	</nav>
	<div id="main-content">
		<button id="assign_factories">Allocate Factories and Retailers!!!</button>
		<p id="status"></p>
<p id="msg"></p>
	</div>

</div>
</body>
{% load staticfiles %}
<script type="text/javascript" src="{% static 'js/jquery.min.js' %}"></script>
<script type="text/javascript">
	var url = "{% url 'assign_factory' %}";
	$("#assign_factories").click(AssignFactories);
	function AssignFactories() {
	    console.log("Assign Factory is working!")
	    var id = "{{request.session.user_id}}";
	    $.ajax({
	        url : url, 
	        type : "POST",
	        data : {"user_id":id},
	        success : function(json) {
	        	var status;
	        	if(json.status == "200")
	        		status = "Success !!";
	        	else if(json.status == "100" || json.status == "101")
	        		status = "Error !!";
	           	$("#status").html(status);
	           	$("#msg").html(json.data.description);
	        },
	        error : function(xhr,errmsg,err) {
	           $("#status").html("ERROR");
	           $("#msg").html(err);
	           console.log(xhr.status + ": " + xhr.responseText);
	        }
	    });
	}
</script>
</body>
</html>
